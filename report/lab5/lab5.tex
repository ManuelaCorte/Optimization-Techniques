In this lab, we will implement two different optimization methods for the Knapsack problem: Iterated Local Search and Simulated Annealing.
\subsection{Iterated Local Search}
Iterated Local Search (ILS) is a stochastic local search method that generates a sequence of solutions generated by an embedded heuristic. It can be seen as a family of algorithms based on the same basic procedure:
\begin{enumerate}
    \item Generate an initial solution $s$.
    \item Local search to obtain a local minimum $s*$.
    \item Repeat until a stopping criterion is met:
          \begin{enumerate}
              \item Perturb $s*$ to obtain a new solution $s'$.
              \item Apply a local search procedure to $s'$ to obtain a local minimum $s*'$.
              \item Accept either $s*$ or $S*'$ as the new current solution based on some acceptance criterion.
          \end{enumerate}
\end{enumerate}
ILS can be seen as a general framework that can be instantiated in many ways by choosing different local search procedures, perturbation mechanisms and intensities, and acceptance criteria. In this instance, we are basically reimplementing the Variable Neighborhood Search (VNS) algorithm (see lab 4 for more details).

\subsection{Simulated Annealing}
Simulated Annealing is a optimization algorithm inspired by the annealing process in metallurgy. The algorithm starts with an initial solution and iteratively moves to a new solution. The new solution is accepted if it improves upon the current solution or, if it's worse,depending on a probability that decreases with time. The probability of accepting a solution that is worse than the current solution is given by the Metropolis criterion $p = e^{-(f(x')-f(x))/T}$. The temperature $T$ is a parameter that controls the probability of accepting a worse solution and is decreased over time according to a cooling schedule ($T = \alpha T$).

The first parameter that we need to evaluate is the temperature $T$ \ref{tab:sa-temp}. As we can see, the best performance is achieved with $T=1$ or smaller which makes sense since the difference in the objective function is small (remember the observation made abount temperature in Basing Hopping).
\begin{table}[H]
    \centering
    \begin{tabular}{c||c |c}
        T    & quantity & capacity \\ \hline
        0.1  & 14.62    & 9.79     \\
        0.5  & 14.64    & 9.88     \\
        1.0  & 14.65    & 9.83     \\
        5.0  & 13.72    & 9.61     \\
        10.0 & 12.94    & 9.22     \\
    \end{tabular}
    \caption{Different temperatures}
    \label{tab:sa-temp}
\end{table}

The initial solution doesn't seem to be important for the performance of the algorithm \ref{tab:sa-start}
\begin{table}[H]
    \centering
    \begin{tabular}{c||c |c}
        starting point                 & quantity & capacity \\ \hline
        (1, 0, 0, 1, 0, 1, 0, 1, 0, 1) & 14.72    & 9.82     \\
        (0, 1, 0, 1, 1, 1, 0, 1, 0, 0) & 14.61    & 9.85     \\
        (1, 1, 1, 1, 1, 1, 1, 1, 1, 1) & 14.79    & 9.84     \\
        (0, 0, 0, 0, 0, 0, 0, 0, 0, 0) & 14.63    & 9.8      \\
    \end{tabular}
    \caption{Different starting points with $k=10$ and $T=1$}
    \label{tab:sa-start}
\end{table}

Differently from ILS and VNS, the neighbourhood structure is not as important for the performance of the algorithm \ref{tab:sa-neigh} probably due to the different accepting criteria used that allows the algorithm to explore the search space more freely. Even though the difference is small, the best performance is still achieved with $k=10$.
\begin{table}[H]
    \centering
    \begin{tabular}{c||c |c}
        k  & quantity & capacity \\ \hline
        2  & 11.85    & 9.5      \\
        5  & 14.49    & 9.81     \\
        7  & 14.63    & 9.83     \\
        10 & 14.70     & 9.79     \\
    \end{tabular}
    \caption{Different neighborhood structures and $T=1$}
    \label{tab:sa-neigh}
\end{table}

The last parameter that we need to evaluate is the cooling schedule. We can see that the performance of the algorithm is not very sensitive to the choice of the cooling schedule \ref{tab:sa-cool}.
\begin{table}[H]
    \centering
    \begin{tabular}{c||c |c}
        k   & quantity & capacity \\ \hline
        0.1 & 14.58    & 9.74     \\
        0.3 & 14.65    & 9.80     \\
        0.5 & 14.70    & 9.81     \\
        0.7 & 14.70    & 9.79     \\
        0.9 & 14.45    & 9.74     \\
    \end{tabular}
    \caption{Different cooling schedules and $T=1$ and $k=10$}
    \label{tab:sa-cool}
\end{table}